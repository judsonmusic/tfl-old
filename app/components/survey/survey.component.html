<div class="container">
  <h1>Train For Life Balance Assessment <span *ngIf="data.account.firstName">for {{data.account.firstName}}</span></h1>
  <!--<h4>Please answer the following questions to create your profile. <a href="javascript:void(0)" (click)="finish($event)">Go to dashboard!</a></h4>-->
  <hr/>

  <div *ngIf="!data.account.createdAt">
    <div class="row">
      <div class="col-md-12"> <p>Before we begin, we just need to know a little bit about you. Setting up an account will keep you from losing your data and allow you to come back and finish at any time.</p></div>
      </div>
    <div class="row">
      <div class="col-md-4"></div>
      <div class="col-md-4">

    <user-component></user-component>
        </div>
    <div class="col-md-4"></div>
    </div>
  </div>

  <!--show the instructions if count is 0 and account has been created--->
  <div class="instructions" *ngIf="count==0 && data.account.createdAt">
    <img src="/app/images/log_only_large.jpg" style="float: left; max-width: 100%;"/>

    <p>This Train For Life Balance Assessment tool is intended to allow you to assess your life in 15 different dimensions and rank how balanced and satisfied you are with each. This holistic approach will allow you to take inventory of your life in a more comprehensive manner. Examining only one aspect of your life would be incomplete so this TFL Balance Assessment tool will provide you with more insight and a broader perspective of your total wellbeing. There are no wrong or right answers so
      just trust your gut and rank each area as authentically as possible. Knowing where you are is the first step in making mindful decisions on where you want to go. </p>

    <p>Reflect over the past 3 months as you answer each question. You will be asked to rate each dimension regarded: how balanced and satisfied you feel, level of importance, motivation to change, your overall happiness and how your job and or school performance is impacted. Once you complete the assessment you will receive your personalized TFL Empowerment Guide which will provide you with insight, resources, and some self-guided exercises. Your privacy is important to us so be assured that
      your personal assessment information will be kept confidential and will not be shared.</p>


    <p>
      <button (click)="start($event)" class="btn btn-primary">Let's Begin!</button>
    </p>

  </div>

  <div class="instructions" *ngIf="count>0">
    <p>
      Please rate the below statements using the rating scale which best reflects how you view your life in each TFL dimension.
    </p>
  </div>

  <div class="">
    <div class="col-md-12">
      <form class="form form-horizontal">
        <ul *ngIf="count">
          <li *ngFor="let q of (questions | myfilter:count)" class="row survey-item">
            <div class="questions"><span class="survey-category">{{q.category}}</span> <span
              class="survey-question-count">Question {{count}} of {{questions.length}}</span>
              <hr/>
              <p class="survey-question">{{q.question}} <br/><span style="color:#089b6f" *ngIf="data.account.assessment[q.id].answer">You: {{(answers | myfilter: data.account.assessment[q.id].answer)[0].value }}<a href="javascript: void(0)" (click)="data.account.assessment[q.id].answer = '';" title="Change Answer"><i class="fa fa-times red" aria-hidden="true"></i></a></span></p>

            </div>
            <!--answers-->
            <div class="answers">
              <div class="survey-radio-wrapper" *ngFor="let a of answers">
                <input type="radio" id="{{q.id}}_{{a.id}}" name="survey_{{q.category}}" value="{{a.id}}" [(ngModel)]="data.account.assessment[q.id].answer"/> {{a.id}}
                <label [attr.for]="q.id + '_' + a.id"><span></span>{{a.value}}</label>
              </div>
            </div>
            <!--END: answers-->
            <!--sub-->
            <div class="sub-survey" *ngIf="data.account.assessment[q.id].answer">
              <h3>Please answer the following 5 questions by indicating where you fall on the below 1 through 5 scale</h3>

              <p>1 = NOT at all<br>
                5 = Extremely</p>

              <ul>
                <li *ngFor="let s of subquestions; let i = index">

                  <p class="sub-question">{{s.question}}</p>

                  <div class="survey-radio-wrapper-subs">
                    <input type="radio" id="{{q.id}}_sub_{{s.id}}_1" name="survey_sub_{{s.id}}_{{q.category}}" value="1" [(ngModel)]="data.account.assessment[q.id].subs[s.id-1]"/>
                    <label [attr.for]="q.id + '_sub_' + s.id + '_1'"><span></span>1</label>
                    <input type="radio" id="{{q.id}}_sub_{{s.id}}_2" name="survey_sub_{{s.id}}_{{q.category}}" value="2" [(ngModel)]="data.account.assessment[q.id].subs[s.id-1]"/>
                    <label [attr.for]="q.id + '_sub_' + s.id + '_2'"><span></span>2</label>
                    <input type="radio" id="{{q.id}}_sub_{{s.id}}_3" name="survey_sub_{{s.id}}_{{q.category}}" value="3" [(ngModel)]="data.account.assessment[q.id].subs[s.id-1]"/>
                    <label [attr.for]="q.id + '_sub_' + s.id + '_3'"><span></span>3</label>
                    <input type="radio" id="{{q.id}}_sub_{{s.id}}_4" name="survey_sub_{{s.id}}_{{q.category}}" value="4" [(ngModel)]="data.account.assessment[q.id].subs[s.id-1]"/>
                    <label [attr.for]="q.id + '_sub_' + s.id + '_4'"><span></span>4</label>
                    <input type="radio" id="{{q.id}}_sub_{{s.id}}_5" name="survey_sub_{{s.id}}_{{q.category}}" value="5" [(ngModel)]="data.account.assessment[q.id].subs[s.id-1]"/>
                    <label [attr.for]="q.id + '_sub_' + s.id + '_5'"><span></span>5</label>
                  </div>
                </li>
                <li class="text-right">
                  <button class="btn btn-primary" *ngIf="count < questions.length && count > 1" (click)="counterDown()">Back</button>
                  <button class="btn btn-primary" *ngIf="count < questions.length && data.account.assessment[q.id].subs.length === 5" (click)="save();">Next</button>
                  <button class="btn btn-primary" *ngIf="count == questions.length" (click)="finish($event)">Finish</button>
                </li>
                <li class="clearfix"></li>
              </ul>
            </div>
          </li>
        </ul>
        <div class="text-right">
          <button *ngIf="1==2" class="btn btn-primary">Next</button>
        </div>
      </form>
    </div>
  </div>
</div>
